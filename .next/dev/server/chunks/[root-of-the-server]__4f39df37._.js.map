{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/wanghaixin/Development/telegramBotWork/SearchBot/lib/admin-api.ts"],"sourcesContent":["const BASE_URL =\n  process.env.ADMIN_API_BASE_URL ??\n  `http://127.0.0.1:${process.env.WEB_PORT ?? \"8080\"}`\n\nexport async function adminFetch(path: string, init?: RequestInit, token?: string) {\n  const url = path.startsWith(\"http\") ? path : `${BASE_URL}${path}`\n  const headers = new Headers(init?.headers)\n  if (token) {\n    headers.set(\"Authorization\", `Bearer ${token}`)\n  }\n  const response = await fetch(url, {\n    ...init,\n    headers,\n  })\n  return response\n}\n\n"],"names":[],"mappings":";;;;AAAA,MAAM,WACJ,QAAQ,GAAG,CAAC,kBAAkB,IAC9B,CAAC,iBAAiB,EAAE,QAAQ,GAAG,CAAC,QAAQ,IAAI,QAAQ;AAE/C,eAAe,WAAW,IAAY,EAAE,IAAkB,EAAE,KAAc;IAC/E,MAAM,MAAM,KAAK,UAAU,CAAC,UAAU,OAAO,GAAG,WAAW,MAAM;IACjE,MAAM,UAAU,IAAI,QAAQ,MAAM;IAClC,IAAI,OAAO;QACT,QAAQ,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO;IAChD;IACA,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,GAAG,IAAI;QACP;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/wanghaixin/Development/telegramBotWork/SearchBot/app/api/users/%5Bid%5D/route.ts"],"sourcesContent":["import { cookies } from \"next/headers\"\nimport { NextResponse } from \"next/server\"\nimport { adminFetch } from \"@/lib/admin-api\"\n\nexport async function GET(\n  request: Request,\n  context: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await context.params\n    const cookieStore = await cookies()\n    const token = cookieStore.get(\"admin_token\")?.value\n    if (!token) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const response = await adminFetch(`/users/${id}`, undefined, token)\n    const data = await response.json()\n    return NextResponse.json(data)\n  } catch (error) {\n    console.error(\"Failed to fetch user:\", error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : \"Failed to fetch user\" },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function PUT(\n  request: Request,\n  context: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await context.params\n    const cookieStore = await cookies()\n    const token = cookieStore.get(\"admin_token\")?.value\n    if (!token) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const response = await adminFetch(\n      `/users/${id}`,\n      {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      },\n      token,\n    )\n    const data = await response.json()\n    return NextResponse.json(data)\n  } catch (error) {\n    console.error(\"Failed to update user:\", error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : \"Failed to update user\" },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function DELETE(\n  request: Request,\n  context: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await context.params\n    const cookieStore = await cookies()\n    const token = cookieStore.get(\"admin_token\")?.value\n    if (!token) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 })\n    }\n\n    await adminFetch(`/users/${id}`, { method: \"DELETE\" }, token)\n    return new NextResponse(null, { status: 204 })\n  } catch (error) {\n    console.error(\"Failed to delete user:\", error)\n    return NextResponse.json(\n      { error: error instanceof Error ? error.message : \"Failed to delete user\" },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IACpB,OAAgB,EAChB,OAA4C;IAE5C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,QAAQ,MAAM;QACnC,MAAM,cAAc,MAAM,IAAA,2QAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;QAC9C,IAAI,CAAC,OAAO;YACV,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,WAAW,MAAM,IAAA,mIAAU,EAAC,CAAC,OAAO,EAAE,IAAI,EAAE,WAAW;QAC7D,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,+QAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAuB,GACzE;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,IACpB,OAAgB,EAChB,OAA4C;IAE5C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,QAAQ,MAAM;QACnC,MAAM,cAAc,MAAM,IAAA,2QAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;QAC9C,IAAI,CAAC,OAAO;YACV,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,WAAW,MAAM,IAAA,mIAAU,EAC/B,CAAC,OAAO,EAAE,IAAI,EACd;YACE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB,GACA;QAEF,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,+QAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAwB,GAC1E;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,OACpB,OAAgB,EAChB,OAA4C;IAE5C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,QAAQ,MAAM;QACnC,MAAM,cAAc,MAAM,IAAA,2QAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;QAC9C,IAAI,CAAC,OAAO;YACV,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,IAAA,mIAAU,EAAC,CAAC,OAAO,EAAE,IAAI,EAAE;YAAE,QAAQ;QAAS,GAAG;QACvD,OAAO,IAAI,+QAAY,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC9C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAwB,GAC1E;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}