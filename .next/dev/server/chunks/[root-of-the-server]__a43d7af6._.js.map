{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/wanghaixin/Development/telegramBotWork/SearchBot/lib/admin-api.ts"],"sourcesContent":["const BASE_URL =\n  process.env.ADMIN_API_BASE_URL ??\n  `http://127.0.0.1:${process.env.WEB_PORT ?? \"8080\"}`\n\nexport async function adminFetch(path: string, init?: RequestInit, token?: string) {\n  const url = path.startsWith(\"http\") ? path : `${BASE_URL}${path}`\n  const headers = new Headers(init?.headers)\n  if (token) {\n    headers.set(\"Authorization\", `Bearer ${token}`)\n  }\n  const response = await fetch(url, {\n    ...init,\n    headers,\n  })\n  return response\n}\n\n"],"names":[],"mappings":";;;;AAAA,MAAM,WACJ,QAAQ,GAAG,CAAC,kBAAkB,IAC9B,CAAC,iBAAiB,EAAE,QAAQ,GAAG,CAAC,QAAQ,IAAI,QAAQ;AAE/C,eAAe,WAAW,IAAY,EAAE,IAAkB,EAAE,KAAc;IAC/E,MAAM,MAAM,KAAK,UAAU,CAAC,UAAU,OAAO,GAAG,WAAW,MAAM;IACjE,MAAM,UAAU,IAAI,QAAQ,MAAM;IAClC,IAAI,OAAO;QACT,QAAQ,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO;IAChD;IACA,MAAM,WAAW,MAAM,MAAM,KAAK;QAChC,GAAG,IAAI;QACP;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/wanghaixin/Development/telegramBotWork/SearchBot/app/api/resources/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { cookies } from \"next/headers\"\nimport { adminFetch } from \"@/lib/admin-api\"\n\ntype RouteParams = { params: Promise<{ id: string }> }\n\nexport async function DELETE(_: Request, { params }: RouteParams) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"admin_token\")?.value\n  if (!token) {\n    return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 })\n  }\n  const { id } = await params\n  const upstream = await adminFetch(\n    `/resources/${id}`,\n    {\n      method: \"DELETE\",\n    },\n    token,\n  )\n  return new NextResponse(null, { status: upstream.status })\n}\n\nexport async function PUT(request: Request, { params }: RouteParams) {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"admin_token\")?.value\n  if (!token) {\n    return NextResponse.json({ message: \"Unauthorized\" }, { status: 401 })\n  }\n  const { id } = await params\n  const payload = await request.json()\n  const upstream = await adminFetch(\n    `/resources/${id}`,\n    {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    },\n    token,\n  )\n  const text = await upstream.text()\n  if (!text) {\n    return NextResponse.json({}, { status: upstream.status })\n  }\n  try {\n    return NextResponse.json(JSON.parse(text), { status: upstream.status })\n  } catch {\n    return new NextResponse(text, { status: upstream.status })\n  }\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAIO,eAAe,OAAO,CAAU,EAAE,EAAE,MAAM,EAAe;IAC9D,MAAM,cAAc,MAAM,IAAA,2QAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;IAC9C,IAAI,CAAC,OAAO;QACV,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAe,GAAG;YAAE,QAAQ;QAAI;IACtE;IACA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,WAAW,MAAM,IAAA,mIAAU,EAC/B,CAAC,WAAW,EAAE,IAAI,EAClB;QACE,QAAQ;IACV,GACA;IAEF,OAAO,IAAI,+QAAY,CAAC,MAAM;QAAE,QAAQ,SAAS,MAAM;IAAC;AAC1D;AAEO,eAAe,IAAI,OAAgB,EAAE,EAAE,MAAM,EAAe;IACjE,MAAM,cAAc,MAAM,IAAA,2QAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,gBAAgB;IAC9C,IAAI,CAAC,OAAO;QACV,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAe,GAAG;YAAE,QAAQ;QAAI;IACtE;IACA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,UAAU,MAAM,QAAQ,IAAI;IAClC,MAAM,WAAW,MAAM,IAAA,mIAAU,EAC/B,CAAC,WAAW,EAAE,IAAI,EAClB;QACE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB,GACA;IAEF,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,IAAI,CAAC,MAAM;QACT,OAAO,+QAAY,CAAC,IAAI,CAAC,CAAC,GAAG;YAAE,QAAQ,SAAS,MAAM;QAAC;IACzD;IACA,IAAI;QACF,OAAO,+QAAY,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,OAAO;YAAE,QAAQ,SAAS,MAAM;QAAC;IACvE,EAAE,OAAM;QACN,OAAO,IAAI,+QAAY,CAAC,MAAM;YAAE,QAAQ,SAAS,MAAM;QAAC;IAC1D;AACF"}}]
}